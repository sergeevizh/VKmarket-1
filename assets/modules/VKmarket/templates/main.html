<!DOCTYPE html>
<html>

<head>
    <title>VKmarket</title>
    <link rel="stylesheet" type="text/css" href="../assets/modules/VKmarket/datatables/css/jquery.datatables.css">
    <link rel="stylesheet" type="text/css" href="media/style/[+theme+]/css/styles.min.css">
    <link rel="stylesheet" type="text/css" href="../assets/modules/VKmarket/css/styles.css">
    <script type="text/javascript" src="media/script/tabpane.js"></script>
    <script type="text/javascript" src="[+jquery_path+]"></script>
    <script type="text/javascript" src="media/script/mootools/mootools.js"></script>
    <script src="../assets/modules/VKmarket/datatables/js/jquery.datatables.min.js"></script>
    <script>
        function showLoader() {
            document.querySelector('body').classList.add('loading');
        }
        const checkAll = function (selector, it) {
            const items = document.querySelectorAll(selector);
            for (let index = 0; index < items.length; index++) {
                const item = items[index];
                item.checked = it.checked;
            }
        }

        const postChecked = function (func, form_selector) {
            const form = document.querySelector(form_selector);
            const func_input = form.querySelector('input[name="function"]');
            const id_input = form.querySelector('input[name="id"]');

            func_input.value = func;
            id_input.value = '';
            form.submit();
            showLoader();
        }

        const postOne = function (func, id, type, form_selector, vk_id) {
            const form = document.querySelector(form_selector);
            const func_input = form.querySelector('input[name="function"]');
            const id_input = form.querySelector('input[name="id"]');
            const vk_id_input = form.querySelector('input[name="vk_id"]');
            const type_input = form.querySelector('input[name="type"]');

            func_input.value = func;
            type_input.value = type;
            id_input.value = id;
            vk_id_input.value = vk_id;
            form.submit();
            showLoader();
        }
    </script>
</head>

<body>
    <div id="mainloader"></div>
    <h1>
        <i class="fa fa-vk"></i>VKmarket
    </h1>

    <div id="actions">
        <div class="btn-group">
            <a class="btn btn-secondary" href="javascript:;" onclick="window.location.href=window.location.href;">
                <i class="fa fa-refresh"></i>
                <span>Обновить</span>
            </a>
            <a class="btn btn-danger" href="javascript:;" onclick="window.location.href='index.php?a=106';">
                <i class="fa fa-times-circle"></i>
                <span>Закрыть</span>
            </a>
        </div>
    </div>

    <div class="tab-pane vk" id="market_pane">
        <form id="item-form" class="tab-page" action="" method="POST">

            <input id="item-id-one" type="hidden" name="id" value="">
            <input id="item-vk_id-one" type="hidden" name="vk_id" value="">
            <input id="item-template-one" type="hidden" name="template" value="[+template_item+]">
            <input id="item-function-one" type="hidden" name="function" value="">
            <input id="item-type-one" type="hidden" name="type" value="">

            <h2 class="tab">Товары</h2>
            <div class="tab-body">
                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Eum earum quasi tempore illo omnis voluptates quia, cum deleniti incidunt ullam numquam suscipit, culpa saepe quos enim, provident facere aperiam nostrum.</p>
                <br>
                <div class="table-responsive">
                    <table class="display table data" id="item-table">
                        <thead>
                            <tr>
                                <th class="vk__cell check">
                                    <input type="checkbox" class="check-item-all" onchange="checkAll('.check-item', $(this));">
                                </th>
                                <th class="vk__cell status">Статус</th>
                                <th class="vk__cell title">Название</th>
                                <th class="vk__cell type">Тип</th>
                                <th class="vk__cell id">ID</th>
                                <th class="vk__cell id-vk">ID ВК</th>
                                <th class="vk__cell actions">
                                    <a href="javascript:;" onclick="postChecked('add', '#item-form');" title="Загрузить в сообщество ВК">
                                        <i class="fa fa-arrow-up fa-fw"></i>
                                    </a>
                                    <a href="javascript:;" onclick="postChecked('edit', '#item-form');" title="Обновить данные в сообществе ВК">
                                        <i class="fa fa-refresh fa-fw"></i>
                                    </a>
                                    <a href="javascript:;" onclick="postChecked('delete', '#item-form');" title="Удалить из сообщества ВК">
                                        <i class="fa fa-arrow-down fa-fw"></i>
                                    </a>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            [+original+]
                            [+license+]
                            [+spray+]
                            [+probnik+]
                            [+phero10+]
                            [+mini+]
                        </tbody>
                    </table>
                    <script>
                        jQuery("#item-table").DataTable({
                            "columns": [{
                                "orderable": false
                            }, {
                                "orderable": true
                            }, {
                                "orderable": true
                            }, {
                                "orderable": true
                            }, {
                                "orderable": false
                            }, {
                                "orderable": false
                            }, {
                                "orderable": false
                            }],
                            "order": [
                                [2, 'asc']
                            ],
                            "lengthMenu": [10],
                            "language": {
                                "decimal": "",
                                "emptyTable": "Данные отсутствуют в таблице",
                                "info": "Показаны строки с _START_ по _END_ из _TOTAL_",
                                "infoEmpty": "Список пуст",
                                "infoFiltered": "(отфильтровано из _MAX_ строк)",
                                "infoPostFix": "",
                                "thousands": ",",
                                "lengthMenu": "Показывать по _MENU_ строк",
                                "loadingRecords": "Загрузка...",
                                "processing": "Подождите...",
                                "search": "Поиск:",
                                "zeroRecords": "Совпадений не найдено",
                                "paginate": {
                                    "first": "Начало",
                                    "last": "Конец",
                                    "next": "Далее",
                                    "previous": "Назад"
                                },
                                "aria": {
                                    "sortAscending": ": отсортировать по возрастанию",
                                    "sortDescending": ": отсортировать по убыванию"
                                }
                            }
                        });
                    </script>
                </div>
            </div>
        </form>

        <form id="album-form" class="tab-page" action="" method="POST">

            <input id="album-id-one" type="hidden" name="id" value="">
            <input id="album-vk_id-one" type="hidden" name="vk_id" value="">
            <input id="album-template-one" type="hidden" name="template" value="[+template_album+]">
            <input id="album-function-one" type="hidden" name="function" value="">
            <input id="album-type-one" type="hidden" name="type" value="">

            <h2 class="tab">Подборки</h2>
            <div class="tab-body">
                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Eum earum quasi tempore illo omnis voluptates quia, cum deleniti incidunt ullam numquam suscipit, culpa saepe quos enim, provident facere aperiam nostrum.</p>
                <br>
                <div class="table-responsive">
                    <table class="display table data" id="album-table">
                        <thead>
                            <tr>
                                <th class="vk__cell check">
                                    <input type="checkbox" class="check-album-all" onchange="checkAll('.check-album', $(this));">
                                </th>
                                <th class="vk__cell status">Статус</th>
                                <th class="vk__cell title">Название</th>
                                <th class="vk__cell id">ID</th>
                                <th class="vk__cell id-vk">ID ВК</th>
                                <th class="vk__cell actions">
                                    <a href="javascript:;" onclick="postChecked('add', '#album-form');" title="Загрузить в сообщество ВК">
                                        <i class="fa fa-arrow-up fa-fw"></i>
                                    </a>
                                    <a href="javascript:;" onclick="postChecked('edit', '#album-form');" title="Обновить данные в сообществе ВК">
                                        <i class="fa fa-refresh fa-fw"></i>
                                    </a>
                                    <a href="javascript:;" onclick="postChecked('delete', '#album-form');" title="Удалить из сообщества ВК">
                                        <i class="fa fa-arrow-down fa-fw"></i>
                                    </a>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            [+album+]
                        </tbody>
                    </table>
                    <script>
                        jQuery("#album-table").DataTable({
                            "columns": [{
                                "orderable": false
                            }, {
                                "orderable": true
                            }, {
                                "orderable": true
                            }, {
                                "orderable": false
                            }, {
                                "orderable": false
                            }, {
                                "orderable": false
                            }],
                            "order": [
                                [2, 'asc']
                            ],
                            "lengthMenu": [10],
                            "language": {
                                "decimal": "",
                                "emptyTable": "Данные отсутствуют в таблице",
                                "info": "Показаны строки с _START_ по _END_ из _TOTAL_",
                                "infoEmpty": "Список пуст",
                                "infoFiltered": "(отфильтровано из _MAX_ строк)",
                                "infoPostFix": "",
                                "thousands": ",",
                                "lengthMenu": "Показывать по _MENU_ строк",
                                "loadingRecords": "Загрузка...",
                                "processing": "Подождите...",
                                "search": "Поиск:",
                                "zeroRecords": "Совпадений не найдено",
                                "paginate": {
                                    "first": "Начало",
                                    "last": "Конец",
                                    "next": "Далее",
                                    "previous": "Назад"
                                },
                                "aria": {
                                    "sortAscending": ": отсортировать по возрастанию",
                                    "sortDescending": ": отсортировать по убыванию"
                                }
                            }
                        });
                    </script>
                </div>
            </div>
        </form>
    </div>
</body>

</html>